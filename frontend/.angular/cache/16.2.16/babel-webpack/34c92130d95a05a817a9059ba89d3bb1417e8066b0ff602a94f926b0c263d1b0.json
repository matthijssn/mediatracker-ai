{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../core/services/media-api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/card\";\nimport * as i6 from \"../shared/rating.component\";\nfunction MediaListComponent_mat_card_4_img_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 9);\n  }\n  if (rf & 2) {\n    const m_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", (m_r1.externalData == null ? null : m_r1.externalData.data == null ? null : m_r1.externalData.data.sources == null ? null : m_r1.externalData.data.sources[0] == null ? null : m_r1.externalData.data.sources[0].result == null ? null : m_r1.externalData.data.sources[0].result.Poster) || \"https://image.tmdb.org/t/p/w300\" + (m_r1.externalData == null ? null : m_r1.externalData.data == null ? null : m_r1.externalData.data.sources == null ? null : m_r1.externalData.data.sources[0] == null ? null : m_r1.externalData.data.sources[0].result == null ? null : m_r1.externalData.data.sources[0].result.poster_path), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction MediaListComponent_mat_card_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-card\", 3)(1, \"mat-card-header\");\n    i0.ɵɵelement(2, \"div\", 4);\n    i0.ɵɵelementStart(3, \"mat-card-title\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mat-card-subtitle\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, MediaListComponent_mat_card_4_img_7_Template, 1, 1, \"img\", 5);\n    i0.ɵɵelementStart(8, \"mat-card-content\")(9, \"p\", 6);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"mat-card-actions\")(12, \"app-rating\", 7);\n    i0.ɵɵlistener(\"valueChange\", function MediaListComponent_mat_card_4_Template_app_rating_valueChange_12_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const m_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onRate(m_r1, $event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function MediaListComponent_mat_card_4_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const m_r1 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.view(m_r1));\n    });\n    i0.ɵɵtext(14, \"View\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const m_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_3_0;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(m_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(m_r1.category);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (m_r1.externalData == null ? null : m_r1.externalData.data == null ? null : m_r1.externalData.data.sources == null ? null : m_r1.externalData.data.sources[0] == null ? null : m_r1.externalData.data.sources[0].result == null ? null : m_r1.externalData.data.sources[0].result.Poster) || (m_r1.externalData == null ? null : m_r1.externalData.data == null ? null : m_r1.externalData.data.sources == null ? null : m_r1.externalData.data.sources[0] == null ? null : m_r1.externalData.data.sources[0].result == null ? null : m_r1.externalData.data.sources[0].result.poster_path));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(m_r1.tags == null ? null : (tmp_3_0 = m_r1.tags.slice(0, 3)) == null ? null : tmp_3_0.join(\", \"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", ctx_r0.getRating(m_r1));\n  }\n}\nexport let MediaListComponent = /*#__PURE__*/(() => {\n  class MediaListComponent {\n    constructor(media, router) {\n      this.media = media;\n      this.router = router;\n      this.items = [];\n    }\n    ngOnInit() {\n      this.media.list().subscribe(res => this.items = res);\n    }\n    getRating(m) {\n      return m._rating || 0;\n    }\n    onRate(m, value) {\n      this.media.patchRating(m._id || m.id, {\n        rating: value\n      }).subscribe(r => {\n        m._rating = value;\n      });\n    }\n    view(m) {\n      this.router.navigate(['/media', m._id || m.id]);\n    }\n    static {\n      this.ɵfac = function MediaListComponent_Factory(t) {\n        return new (t || MediaListComponent)(i0.ɵɵdirectiveInject(i1.MediaApiService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MediaListComponent,\n        selectors: [[\"app-media-list\"]],\n        decls: 5,\n        vars: 1,\n        consts: [[1, \"media-list\"], [1, \"grid\"], [\"class\", \"media-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"media-card\"], [\"mat-card-avatar\", \"\", 1, \"media-avatar\"], [\"class\", \"poster\", \"alt\", \"poster\", 3, \"src\", 4, \"ngIf\"], [1, \"tags\"], [3, \"value\", \"valueChange\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"alt\", \"poster\", 1, \"poster\", 3, \"src\"]],\n        template: function MediaListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2, \"Your Collection\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 1);\n            i0.ɵɵtemplate(4, MediaListComponent_mat_card_4_Template, 15, 5, \"mat-card\", 2);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngForOf\", ctx.items);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i4.MatButton, i5.MatCard, i5.MatCardActions, i5.MatCardAvatar, i5.MatCardContent, i5.MatCardHeader, i5.MatCardSubtitle, i5.MatCardTitle, i6.RatingComponent],\n        styles: [\"[_nghost-%COMP%]   .media-list[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.media-card[_ngcontent-%COMP%]{width:260px}.poster[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:cover}.tags[_ngcontent-%COMP%]{color:#0009;font-size:.9rem}\"]\n      });\n    }\n  }\n  return MediaListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}